{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "db15fe88_a2b2105b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscribers.java",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2024-01-22T09:56:22Z",
      "side": 1,
      "message": "Shouldn\u0027t we set a StopStrategy? The default seems to be `never-stop` but in the case where a plugin is available but not loaded yet I feel it would make sense to give up after say 5 minutes (perhaps even make it configurable) and there could be other reasons why the deserialization fails.\n\n```suggestion\n    Retryer\u003cEvent\u003e retryer \u003d\n        RetryerBuilder.\u003cEvent\u003enewBuilder()\n            .retryIfException()\n            .withWaitStrategy(WaitStrategies.fixedWait(timeout, TimeUnit.SECONDS))\n            .withStopStrategy(StopStrategy.stopAfterDelay(5*60*1000))\n            .build();\n```",
      "range": {
        "startLine": 93,
        "startChar": 3,
        "endLine": 97,
        "endChar": 21
      },
      "revId": "50de00b4940e9c65e450aac9ba6feb6632bed6f1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36252ced_86a2e992",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscribers.java",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2024-01-22T12:44:17Z",
      "side": 1,
      "message": "Not setting a StopStrategy is by design. The idea is that the Gerrit admin should fix this problem immediately if the retries does not work and it start to spam the log.",
      "parentUuid": "db15fe88_a2b2105b",
      "range": {
        "startLine": 93,
        "startChar": 3,
        "endLine": 97,
        "endChar": 21
      },
      "revId": "50de00b4940e9c65e450aac9ba6feb6632bed6f1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d15a91f_3dc9c5f4",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscribers.java",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2024-01-22T13:31:36Z",
      "side": 1,
      "message": "I don\u0027t think that spamming the log is a very good strategy.\nI\u0027d prefer retries up until it is no longer reasonable to think that the issue is recoverable (a plugin that wasn\u0027t loaded) and then issue an ERROR in the log to clearly tell the Gerrit admin(s) that it\u0027s an unrecoverable error.",
      "parentUuid": "36252ced_86a2e992",
      "range": {
        "startLine": 93,
        "startChar": 3,
        "endLine": 97,
        "endChar": 21
      },
      "revId": "50de00b4940e9c65e450aac9ba6feb6632bed6f1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6a5cb2dc_caa1dd16",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscribers.java",
        "patchSetId": 1
      },
      "lineNbr": 97,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2024-01-24T14:53:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8d15a91f_3dc9c5f4",
      "range": {
        "startLine": 93,
        "startChar": 3,
        "endLine": 97,
        "endChar": 21
      },
      "revId": "50de00b4940e9c65e450aac9ba6feb6632bed6f1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}