{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f198bd35_d2db075b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/Manager.java",
        "patchSetId": 9
      },
      "lineNbr": 48,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:40:56Z",
      "side": 1,
      "message": "This no longer makes sense as this instance is only injected here.",
      "range": {
        "startLine": 48,
        "startChar": 1,
        "endLine": 48,
        "endChar": 52
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da812961_11b25fd4",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/Manager.java",
        "patchSetId": 9
      },
      "lineNbr": 48,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T11:17:26Z",
      "side": 1,
      "message": "It is also injected by the plugins that use this API. \nHowever, stopping the subscriber will indirectly close all the channels and not clearing the subscriber list that RabbitMqBrokerApi take care of should not matter since we are about to close down anyway. So I will remove this.",
      "parentUuid": "f198bd35_d2db075b",
      "range": {
        "startLine": 48,
        "startChar": 1,
        "endLine": 48,
        "endChar": 52
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ed104e9_cea2c25e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/Manager.java",
        "patchSetId": 9
      },
      "lineNbr": 48,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T11:34:28Z",
      "side": 1,
      "message": "Since it\u0027s not a bound in singleton anymore the plugins will have another instance injected.",
      "parentUuid": "da812961_11b25fd4",
      "range": {
        "startLine": 48,
        "startChar": 1,
        "endLine": 48,
        "endChar": 52
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9fd18db5_b8d8b1ab",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/Manager.java",
        "patchSetId": 9
      },
      "lineNbr": 48,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T14:24:53Z",
      "side": 1,
      "message": "That is also a very good point.\nDone",
      "parentUuid": "6ed104e9_cea2c25e",
      "range": {
        "startLine": 48,
        "startChar": 1,
        "endLine": 48,
        "endChar": 52
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5dc3e79a_8f827620",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/Manager.java",
        "patchSetId": 9
      },
      "lineNbr": 49,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:28:36Z",
      "side": 1,
      "message": "You don\u0027t need this, just add the BrokerApiPublisher to `publisherList`.",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 49,
        "endChar": 45
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "48d42894_44a0dcd4",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/Manager.java",
        "patchSetId": 9
      },
      "lineNbr": 49,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T14:24:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5dc3e79a_8f827620",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 49,
        "endChar": 45
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9be6fdd7_35a7f267",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/Manager.java",
        "patchSetId": 9
      },
      "lineNbr": 96,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:40:56Z",
      "side": 1,
      "message": "No longer makes sense.",
      "range": {
        "startLine": 96,
        "startChar": 0,
        "endLine": 96,
        "endChar": 35
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f6cac45c_b88676cd",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/Manager.java",
        "patchSetId": 9
      },
      "lineNbr": 96,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T14:24:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9be6fdd7_35a7f267",
      "range": {
        "startLine": 96,
        "startChar": 0,
        "endLine": 96,
        "endChar": 35
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bae86c96_043e13cf",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/RabbitMqBrokerApi.java",
        "patchSetId": 9
      },
      "lineNbr": 74,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:28:36Z",
      "side": 1,
      "message": "I think the right way would be to throw a [NotImplementedException](https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/NotImplementedException.html).",
      "range": {
        "startLine": 74,
        "startChar": 4,
        "endLine": 74,
        "endChar": 90
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "92d17bd2_debd13df",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/RabbitMqBrokerApi.java",
        "patchSetId": 9
      },
      "lineNbr": 74,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T14:24:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bae86c96_043e13cf",
      "range": {
        "startLine": 74,
        "startChar": 4,
        "endLine": 74,
        "endChar": 90
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7300aeee_a7f6ae98",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscriber.java",
        "patchSetId": 9
      },
      "lineNbr": 56,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:40:56Z",
      "side": 1,
      "message": "Since this is the end of the lifecycle for the object, should this method also remove remaining subscribers from the session or is this done automatically when disconnecting the session?",
      "range": {
        "startLine": 56,
        "startChar": 14,
        "endLine": 56,
        "endChar": 18
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee7a0037_e6ff03fb",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscriber.java",
        "patchSetId": 9
      },
      "lineNbr": 56,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T14:24:53Z",
      "side": 1,
      "message": "It is done automatically when disconnecting the session.",
      "parentUuid": "7300aeee_a7f6ae98",
      "range": {
        "startLine": 56,
        "startChar": 14,
        "endLine": 56,
        "endChar": 18
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5720204_144b996d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/Subscriber.java",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:28:36Z",
      "side": 1,
      "message": "```suggestion\n  boolean addSubscriber(TopicSubscriber topicSubscriber);\n```",
      "range": {
        "startLine": 22,
        "startChar": 10,
        "endLine": 22,
        "endChar": 20
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8850745d_bd27fad1",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/Subscriber.java",
        "patchSetId": 9
      },
      "lineNbr": 22,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T14:24:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b5720204_144b996d",
      "range": {
        "startLine": 22,
        "startChar": 10,
        "endLine": 22,
        "endChar": 20
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9471443_c4393137",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/Session.java",
        "patchSetId": 9
      },
      "lineNbr": 27,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:28:36Z",
      "side": 1,
      "message": "```suggestion\n  String addSubscriber(String topic, Consumer\u003cString\u003e messageBodyConsumer);\n```",
      "range": {
        "startLine": 27,
        "startChar": 9,
        "endLine": 27,
        "endChar": 18
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "02d94cae_e18be5ed",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/Session.java",
        "patchSetId": 9
      },
      "lineNbr": 27,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T14:24:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e9471443_c4393137",
      "range": {
        "startLine": 27,
        "startChar": 9,
        "endLine": 27,
        "endChar": 18
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ef06f8a0_89b707a2",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 198,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:28:36Z",
      "side": 1,
      "message": "```suggestion\n  public synchronized String addSubscriber(String topic, Consumer\u003cString\u003e messageBodyConsumer) {\n```",
      "range": {
        "startLine": 198,
        "startChar": 29,
        "endLine": 198,
        "endChar": 38
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f36ab14a_199b1830",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 198,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T14:24:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef06f8a0_89b707a2",
      "range": {
        "startLine": 198,
        "startChar": 29,
        "endLine": 198,
        "endChar": 38
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0de1afb9_9a990fa4",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 215,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:28:36Z",
      "side": 1,
      "message": "```suggestion\n                        \"Queue: %s, Topic: %s Channel closed by application\",\n```",
      "range": {
        "startLine": 215,
        "startChar": 25,
        "endLine": 215,
        "endChar": 164
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3a2aed23_f80f8e7b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 215,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T14:24:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0de1afb9_9a990fa4",
      "range": {
        "startLine": 215,
        "startChar": 25,
        "endLine": 215,
        "endChar": 164
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0d096b8_ec038b64",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 218,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:28:36Z",
      "side": 1,
      "message": "Is this a `warning`? Seems like a `severe`?",
      "range": {
        "startLine": 218,
        "startChar": 29,
        "endLine": 218,
        "endChar": 36
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5bb2542d_6adb21fe",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 218,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T11:17:26Z",
      "side": 1,
      "message": "I guess it is pretty severe. However, we should be able to recover from it.\nI can change it to severe.",
      "parentUuid": "a0d096b8_ec038b64",
      "range": {
        "startLine": 218,
        "startChar": 29,
        "endLine": 218,
        "endChar": 36
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e971d66c_2fa58741",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 218,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T11:34:28Z",
      "side": 1,
      "message": "No, you\u0027re right, this should be warning and if the second attempt fails it\u0027s a severe.\nSorry for the noise.",
      "parentUuid": "5bb2542d_6adb21fe",
      "range": {
        "startLine": 218,
        "startChar": 29,
        "endLine": 218,
        "endChar": 36
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e98be50_d0aa86e7",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 219,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:28:36Z",
      "side": 1,
      "message": "```suggestion\n                    logger.atWarning().withCause(sig).log(\n                        \"Queue: %s, Topic: %s Channel shut down due to channel error, reconnecting!\",\n```",
      "range": {
        "startLine": 218,
        "startChar": 58,
        "endLine": 219,
        "endChar": 147
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9dc6ff99_b189c00a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 219,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T14:24:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0e98be50_d0aa86e7",
      "range": {
        "startLine": 218,
        "startChar": 58,
        "endLine": 219,
        "endChar": 147
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0df07a66_07c237c0",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 226,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:28:36Z",
      "side": 1,
      "message": "If the Channel is dead, doesn\u0027t the recovery create a new Channel that hasn\u0027t got the subscriber?",
      "range": {
        "startLine": 226,
        "startChar": 109,
        "endLine": 226,
        "endChar": 236
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac0e3b08_f8431b7b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 226,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2023-11-27T10:28:36Z",
      "side": 1,
      "message": "```suggestion\n                        \"Queue: %s, Topic: %s Channel closed due to connection error\",\n```",
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "894ff9fa_fd3016df",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 226,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T11:17:26Z",
      "side": 1,
      "message": "The automatic recovery should recover the subscriber/consumer as well. When manually closing the connection with the RabbitMQ web application, it was able to recover both the channels and the consumers.",
      "parentUuid": "0df07a66_07c237c0",
      "range": {
        "startLine": 226,
        "startChar": 109,
        "endLine": 226,
        "endChar": 236
      },
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0d14c5cf_7c645ab8",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/AMQPSession.java",
        "patchSetId": 9
      },
      "lineNbr": 226,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2023-11-27T14:24:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ac0e3b08_f8431b7b",
      "revId": "351f354b838d9be45a2f1955e4733942985d2e52",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}