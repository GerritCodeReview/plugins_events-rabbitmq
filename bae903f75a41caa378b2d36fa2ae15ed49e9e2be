{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0b3e268b_4f99bc04",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscribers.java",
        "patchSetId": 12
      },
      "lineNbr": 180,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "Same here, I don\u0027t think this is log worthy.",
      "range": {
        "startLine": 180,
        "startChar": 7,
        "endLine": 180,
        "endChar": 74
      },
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "320f5a89_a325f897",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscribers.java",
        "patchSetId": 12
      },
      "lineNbr": 201,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "Let `offsets` be a map of `\u003centry.getValue(), streamSession.getCurrentOffset(entry.getValue()))\u003e` or `\u003centry.getKey().topic(), streamSession.getCurrentOffset(entry.getValue()))\u003e`?",
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "65bc4657_bd9304b3",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscribers.java",
        "patchSetId": 12
      },
      "lineNbr": 206,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "I don\u0027t think we need to log this, at least not as Warning.\nThis is basically caused by a user requesting a non-existing topic.",
      "range": {
        "startLine": 206,
        "startChar": 8,
        "endLine": 206,
        "endChar": 74
      },
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16f92f87_a0d23aff",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscribers.java",
        "patchSetId": 12
      },
      "lineNbr": 213,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "I don\u0027t think this warrants a log-entry as it is a more in the BadRequest territory.",
      "range": {
        "startLine": 211,
        "startChar": 6,
        "endLine": 213,
        "endChar": 25
      },
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13c89815_60f41171",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscribers.java",
        "patchSetId": 12
      },
      "lineNbr": 216,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "As per \"fail-fast\":\n```suggestion\n    if (!properties.getSection(Stream.class).enabled) {\n      logger.atWarning().log(\n          \"Only streams support the replay functionality, please enable stream support to use\"\n              + \" this\");\n      throw new PreconditionFailedException(\n          \"Stream support must be enabled to use replay functionality\");\n    } else {\n      List\u003cLong\u003e offsets \u003d new ArrayList\u003c\u003e();\n      boolean found \u003d false;\n      StreamSubscriberSession streamSession \u003d (StreamSubscriberSession) session;\n      // No need for copying since we\u0027re only reading, not modifying\n      for (Map.Entry\u003cTopicSubscriber, String\u003e entry : consumerTags.entrySet()) {\n        if (entry.getKey().topic().equals(topic)) {\n          offsets.add(streamSession.getCurrentOffset(entry.getValue()));\n          found \u003d true;\n        }\n      }\n      if (!found) {\n        logger.atWarning().log(\"No subscriber found for topic %s\", topic);\n        throw new ResourceNotFoundException(\"No subscriber found for topic \" + topic);\n      }\n      return offsets;\n    }\n```",
      "range": {
        "startLine": 194,
        "startChar": 0,
        "endLine": 216,
        "endChar": 5
      },
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "baffce47_6dea9d97",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/rest/GetOffsetsForTopic.java",
        "patchSetId": 12
      },
      "lineNbr": 36,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "As stated in the documentation, this feels moot to me since this is just a copy from the topic in the call.",
      "range": {
        "startLine": 36,
        "startChar": 4,
        "endLine": 36,
        "endChar": 24
      },
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "169f4360_ca5846ae",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/rest/ReplayEventsAtOffset.java",
        "patchSetId": 12
      },
      "lineNbr": 71,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "Is it really a 400 if the caller wants the offsets for a topic and the topic resource exists but there are no offsets? Isn\u0027t returning an empty list more correct?\nEither that or a 500 ISE if a topic should always have offsets.",
      "range": {
        "startLine": 71,
        "startChar": 18,
        "endLine": 71,
        "endChar": 37
      },
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d0eaacce_d407eb03",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/rest/ReplayEventsAtOffset.java",
        "patchSetId": 12
      },
      "lineNbr": 82,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "```suggestion\n      logger.atFine().log(\n```",
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bc56612d_b751d555",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/rest/ReplayEventsAtOffset.java",
        "patchSetId": 12
      },
      "lineNbr": 89,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "```suggestion\n    logger.atFine().log(\n```",
      "range": {
        "startLine": 89,
        "startChar": 13,
        "endLine": 89,
        "endChar": 17
      },
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6708e1a5_8ef52302",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/StreamSubscriberSession.java",
        "patchSetId": 12
      },
      "lineNbr": 147,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "This is not related to this change, but the issue here is that `consumerId` comes from the `consumerTags` collection of [BrokerApiSubscribers](https://gerrit-review.googlesource.com/c/plugins/events-rabbitmq/+/511121/12/src/main/java/com/googlesource/gerrit/plugins/rabbitmq/message/BrokerApiSubscribers.java#201).\nAnd this collection is a subset copy of `consumerMap` of `StreamSubscriberSession`.\nIf a view of `StreamSubscribersession#consumerMap` was used instead of `BrokerApiSubscribers#consumerTags` it would be more obvious that `state` would never be null.",
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b14b14b0_e14a1018",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/StreamSubscriberSession.java",
        "patchSetId": 12
      },
      "lineNbr": 148,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "```suggestion\n        logger.atFine().log(\"Update current offset to %d for consumer %s\", offset, consumerId);\n```",
      "range": {
        "startLine": 148,
        "startChar": 17,
        "endLine": 148,
        "endChar": 21
      },
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26f32011_3a6cadfa",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/rabbitmq/session/type/StreamSubscriberSession.java",
        "patchSetId": 12
      },
      "lineNbr": 152,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "```suggestion\n            \"Failed to update current offset, consumer: \\\"%s\\\" does not exist\", consumerId);\n```",
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3582f8ce_ca08a404",
        "filename": "src/main/resources/Documentation/rest-api-replay-events.md",
        "patchSetId": 12
      },
      "lineNbr": 62,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "This feels moot, \"we can confirm that we replayed messages in the topic that your requested.\"?",
      "range": {
        "startLine": 62,
        "startChar": 3,
        "endLine": 62,
        "endChar": 28
      },
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d746a9f3_a445b901",
        "filename": "src/main/resources/Documentation/rest-api-replay-events.md",
        "patchSetId": 12
      },
      "lineNbr": 63,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "would `nbr_of_events` make sense?",
      "range": {
        "startLine": 63,
        "startChar": 3,
        "endLine": 63,
        "endChar": 17
      },
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "330cebc3_e61a3243",
        "filename": "src/main/resources/Documentation/rest-api-replay-events.md",
        "patchSetId": 12
      },
      "lineNbr": 75,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "nit: very long line",
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2ebb193_3f474a1c",
        "filename": "src/main/resources/Documentation/rest-api-topics-offsets-get.md",
        "patchSetId": 12
      },
      "lineNbr": 0,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "IIUC if a TopicConsumer doesn\u0027t have an offset a `-1` is returned.\nIf so this should probably be documented here.",
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e75a659c_617c72a9",
        "filename": "src/main/resources/Documentation/rest-api-topics-offsets-get.md",
        "patchSetId": 12
      },
      "lineNbr": 15,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "nit: very long line.",
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9428d506_f5de5019",
        "filename": "src/main/resources/Documentation/rest-api-topics-offsets-get.md",
        "patchSetId": 12
      },
      "lineNbr": 40,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "How useful is this data without some sort of key to the consumer it relates to?",
      "range": {
        "startLine": 40,
        "startChar": 14,
        "endLine": 40,
        "endChar": 29
      },
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "32cf0094_1ebc9720",
        "filename": "src/main/resources/Documentation/rest-api-topics-offsets-get.md",
        "patchSetId": 12
      },
      "lineNbr": 47,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-09-25T17:12:41Z",
      "side": 1,
      "message": "nit: very long line.",
      "revId": "bae903f75a41caa378b2d36fa2ae15ed49e9e2be",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}